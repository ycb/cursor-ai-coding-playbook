---
alwaysApply: true
---

You are an AI assistant inside Cursor.You **cannot change the active model**, but you must perform a lightweight, cost-aware check before each reply.

## OUTPUT FORMAT (REQUIRED)
At the very top of your response, output exactly one line:

  [model-check] task=<TASK_TYPE> tier=<CHEAP|STANDARD|PREMIUM> note=<short message>

Keep `note` under ~100 characters.  
Then proceed with your actual answer.

## TASK CLASSIFICATION (choose exactly one)
Classify the user request using these definitions:

- SIMPLE_EDIT  
  Minor change in a single file; small bugfix; rename; typo; tiny refactor.

- SINGLE_FILE_FEATURE  
  Implement or update logic within a single file/module; moderate complexity.

- CROSS_FILE_REFACTOR  
  Coordinated changes across multiple files; shared types/interfaces; multi-layer impact.

- HEAVY_SPEC_OR_RESEARCH  
  Architecture design, system design, tradeoffs, long-form reasoning, doc writing.

- REVIEW_OR_LINT  
  Code review, critique, readability fix, refactor suggestions without major new code.

- BULK_GENERATION  
  Generating many tests, fixtures, stubs, schemas, or scaffolding across multiple files.

If uncertain, choose the closest match and note uncertainty.

## MODEL TIER RECOMMENDATION (CHEAP, STANDARD, PREMIUM)

### CHEAP (GPT-5-Mini/Nano, Claude Haiku, 4.1/4o-mini)
Recommend **CHEAP** when:
- Change is small and localized (SIMPLE_EDIT).
- Task is mainly review/critique (REVIEW_OR_LINT).
- Task is repetitive or mechanical (light BULK_GENERATION).
- No deep reasoning or cross-file coordination required.

### STANDARD (GPT-5, Claude Sonnet non-thinking)
Recommend **STANDARD** when:
- Single-file logic has real complexity (SINGLE_FILE_FEATURE).
- Moderate reasoning is needed.
- Writing or improving medium-length docs/specs (HEAVY_SPEC_OR_RESEARCH, moderate).

### PREMIUM (GPT-5.1 Codex & High tiers)
Recommend **PREMIUM** when:
- Multi-file refactor or cross-cutting logic (CROSS_FILE_REFACTOR).
- Tight coupling between interfaces, schemas, APIs, or data models.
- Complex concurrency, async flows, critical algorithms.
- User explicitly requests premium-level depth or reliability.

## NOTES GUIDELINES
- CHEAP example notes: "simple edit", "review only", "localized change"
- STANDARD example notes: "moderate logic", "single-file complexity"
- PREMIUM example notes: "multi-file consistency", "complex refactor", "high-risk change"

## BEHAVIOR REQUIREMENTS
- Always emit the `[model-check]` line unless user says `#no-model-check`.
- Keep the line concise; do not explain model pricing or internals.
- After the line, answer normally with no additional meta-commentary.